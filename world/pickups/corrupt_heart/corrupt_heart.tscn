[gd_scene load_steps=14 format=3 uid="uid://b0ttk38sufgur"]

[ext_resource type="Texture2D" uid="uid://di2fa8ln64nqe" path="res://world/pickups/corrupt_heart/corrupt_heart.png" id="1_sj4sw"]
[ext_resource type="Script" uid="uid://1vuuexllss1q" path="res://world/pickups/corrupt_heart/corrupt_heart.gd" id="1_vve5n"]
[ext_resource type="PackedScene" uid="uid://vqmkg8wor6fr" path="res://world/pickups/corrupt_heart/blood_particles/final_burst.tscn" id="2_e8xih"]
[ext_resource type="PackedScene" uid="uid://dtqb8q8qomq31" path="res://world/pickups/corrupt_heart/blood_particles/blood_burst.tscn" id="4_uxcdq"]
[ext_resource type="PackedScene" uid="uid://cldpmxcx2sdmd" path="res://world/pickups/corrupt_heart/blood_particles/blood_spurt.tscn" id="4_vve5n"]
[ext_resource type="Script" uid="uid://7ghh0vndiuvx" path="res://world/pickups/corrupt_heart/blood_particle_spawner.gd" id="5_e76c2"]
[ext_resource type="Script" uid="uid://lxg83i28nlul" path="res://systems/attacking/hurtbox/hurtbox.gd" id="5_uxcdq"]
[ext_resource type="Script" uid="uid://do5vs8m1law7o" path="res://systems/attacking/health/health.gd" id="6_5roo4"]

[sub_resource type="Animation" id="Animation_vve5n"]
length = 0.001

[sub_resource type="Animation" id="Animation_hvqcw"]
resource_name = "corrupt_heart"
loop_mode = 1
step = 0.05
tracks/0/type = "scale_3d"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Sprite3D")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = PackedFloat32Array(0, 1, 0.5, 0.5, 0.5, 0.15, 1, 0.55, 0.55, 0.55, 0.2, 1, 0.6, 0.6, 0.6, 0.4, 1, 0.55, 0.55, 0.55)
tracks/1/type = "method"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("BloodValve1")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0.15),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"spawn"
}]
}
tracks/2/type = "method"
tracks/2/imported = false
tracks/2/enabled = true
tracks/2/path = NodePath("BloodValve2")
tracks/2/interp = 1
tracks/2/loop_wrap = true
tracks/2/keys = {
"times": PackedFloat32Array(0.15),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"spawn"
}]
}
tracks/3/type = "method"
tracks/3/imported = false
tracks/3/enabled = true
tracks/3/path = NodePath("BloodValve3")
tracks/3/interp = 1
tracks/3/loop_wrap = true
tracks/3/keys = {
"times": PackedFloat32Array(0.15),
"transitions": PackedFloat32Array(1),
"values": [{
"args": [],
"method": &"spawn"
}]
}

[sub_resource type="Animation" id="Animation_e8xih"]
resource_name = "death"

[sub_resource type="AnimationLibrary" id="AnimationLibrary_uxcdq"]
_data = {
&"RESET": SubResource("Animation_vve5n"),
&"corrupt_heart": SubResource("Animation_hvqcw"),
&"death": SubResource("Animation_e8xih")
}

[sub_resource type="SphereShape3D" id="SphereShape3D_5roo4"]
radius = 1.3033881

[node name="CorruptHeart" type="Node3D" node_paths=PackedStringArray("health")]
script = ExtResource("1_vve5n")
health = NodePath("Health")
blood_burst_packed = ExtResource("4_uxcdq")
final_burst_packed = ExtResource("2_e8xih")

[node name="Sprite3D" type="Sprite3D" parent="."]
transform = Transform3D(0.5, 0, 0, 0, 0.43301263, 0.25000012, 0, -0.25000012, 0.43301263, 0, 0.82869124, 0)
alpha_cut = 1
texture = ExtResource("1_sj4sw")

[node name="AnimationPlayer" type="AnimationPlayer" parent="."]
libraries = {
&"": SubResource("AnimationLibrary_uxcdq")
}

[node name="AudioStreamPlayer3D" type="AudioStreamPlayer3D" parent="."]

[node name="BloodValve1" type="Node3D" parent="."]
transform = Transform3D(0.93969256, -0.3420201, 0, 0.29619807, 0.8137976, 0.5, -0.17101005, -0.46984628, 0.8660254, -0.37806785, 2.0317316, -0.5496088)
script = ExtResource("5_e76c2")
particle = ExtResource("4_vve5n")

[node name="BloodValve2" type="Node3D" parent="."]
transform = Transform3D(0.9848077, 0.17364818, 0, -0.15038373, 0.8528685, 0.5, 0.08682409, -0.49240386, 0.8660254, 0.30402887, 2.0317316, -0.5496088)
script = ExtResource("5_e76c2")
particle = ExtResource("4_vve5n")

[node name="BloodValve3" type="Node3D" parent="."]
transform = Transform3D(0.34202015, 0.9396926, 0, -0.81379765, 0.29619813, 0.5, 0.4698463, -0.17101008, 0.8660254, 0.7891301, 1.5743597, -0.32335645)
script = ExtResource("5_e76c2")
particle = ExtResource("4_vve5n")

[node name="Hurtbox" type="Area3D" parent="." node_paths=PackedStringArray("health_component")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.72506166, 0)
script = ExtResource("5_uxcdq")
health_component = NodePath("../Health")
allowed_damage_sources = Array[int]([0])
metadata/_custom_type_script = "uid://lxg83i28nlul"

[node name="CollisionShape3D" type="CollisionShape3D" parent="Hurtbox"]
shape = SubResource("SphereShape3D_5roo4")

[node name="Health" type="Node" parent="."]
script = ExtResource("6_5roo4")
max_health = 10
metadata/_custom_type_script = "uid://do5vs8m1law7o"

[node name="BloodEmitCenter" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9867293, 0)
