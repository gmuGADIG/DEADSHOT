[gd_scene load_steps=13 format=3 uid="uid://blppqsxslhh07"]

[ext_resource type="PackedScene" uid="uid://bk60c4813t663" path="res://world/levels/level_base.tscn" id="1_j5c1u"]
[ext_resource type="PackedScene" uid="uid://rberd5xw8srm" path="res://world/transitions/transition.tscn" id="2_83i12"]
[ext_resource type="Resource" uid="uid://q24ustx30otu" path="res://world/floor/sand/sand.tres" id="2_suwgb"]
[ext_resource type="PackedScene" uid="uid://0ndhmibsve8k" path="res://world/comment/comment.tscn" id="4_0hyq2"]
[ext_resource type="PackedScene" uid="uid://d3stqami0urg7" path="res://world/npc/test/npc_test.tscn" id="5_jrcoc"]
[ext_resource type="Script" uid="uid://rvaetvwo5p3h" path="res://systems/dialog/dialog_timeline.gd" id="6_qoiyb"]

[sub_resource type="NavigationMesh" id="NavigationMesh_jsebj"]
vertices = PackedVector3Array(12.672548, 0.49, 3.7185097, 12.672548, 0.49, 2.7185097, 10.922548, 0.49, 2.7185097, 10.172548, 0.49, 4.4685097, -4.5774517, 0.49, 0.71850955, -4.5774517, 0.49, 2.4685097, -4.3274517, 0.49, 6.2185097, 0.6725483, 0.49, 6.4685097, 10.422548, 0.49, 0.96850955, -6.5774517, 0.49, 2.9685097, -6.5774517, 0.49, 3.7185097, -4.5774517, 0.49, 3.9685097, 10.422548, 0.49, 6.4685097, 10.422548, 0.49, 2.2185097)
polygons = [PackedInt32Array(1, 0, 2), PackedInt32Array(2, 0, 3), PackedInt32Array(5, 4, 6), PackedInt32Array(6, 4, 7), PackedInt32Array(7, 4, 3), PackedInt32Array(3, 4, 8), PackedInt32Array(10, 9, 11), PackedInt32Array(11, 9, 5), PackedInt32Array(3, 12, 7), PackedInt32Array(3, 13, 2), PackedInt32Array(8, 13, 3), PackedInt32Array(6, 11, 5)]

[sub_resource type="Curve3D" id="Curve3D_j5c1u"]
_data = {
"points": PackedVector3Array(0, 0, 0, 0, 0, 0, -5.0477953, 0, 0.21564844, 0, 0, 0, 0, 0, 0, 11.060758, 0, 0.26167277, 0, 0, 0, 0, 0, 0, 11.014733, 0, 1.964576, 0, 0, 0, 0, 0, 0, 13.269929, 0, 2.1026497, 0, 0, 0, 0, 0, 0, 13.17788, 0, 4.49592, 0, 0, 0, 0, 0, 0, 10.876657, 0, 4.7260423, 0, 0, 0, 0, 0, 0, 10.968705, 0, 7.211362, 0, 0, 0, 0, 0, 0, -5.0477953, 0, 6.8431654, 0, 0, 0, 0, 0, 0, -5.1858683, 0, 4.3118224, 0, 0, 0, 0, 0, 0, -7.302991, 0, 4.2657986, 0, 0, 0, 0, 0, 0, -7.349015, 0, 2.2867477, 0, 0, 0, 0, 0, 0, -5.277917, 0, 2.1026497),
"tilts": PackedFloat32Array(0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0)
}
point_count = 12

[sub_resource type="Resource" id="Resource_1ab8i"]
script = ExtResource("6_qoiyb")
dialog = "[Garfunkle] where is my house :("
metadata/_custom_type_script = "uid://rvaetvwo5p3h"

[sub_resource type="Resource" id="Resource_jrcoc"]
script = ExtResource("6_qoiyb")
dialog = "[Snake Oil Salesman] \"Woah there, gunslinger! You look like you've seen better days! This infection spreading around seems to be getting the best of everyone in this dusty old town.
Lucky for you I got just the thing. Elixir, the one-size-fits-all cure to this nasty infection.  One bottle and you're cured! Whaddya say, how many bottles of Elixir can I put you down for? Only fifty dollars!
...You don't want any?
Bah, you'll be back. Just you wait. You'll be wishing you had elixir when the infection gets you too.\"
[Snake Oil Salesman] Stupid gunslinger... Stupid town... 
Should'a known better than to sell to a town of broke shmucks. Not even a single bottle sold! 
Nothing left for me here now, it's way too crazy for my liking... gotta cut my losses and get outta this hick desert town.
Hm? What're you lookin' at, gunslinger? If you don't want a damn bottle, then get outta my face. I'm sick of you and sick of this godforsaken town."
metadata/_custom_type_script = "uid://rvaetvwo5p3h"

[sub_resource type="Resource" id="Resource_qoiyb"]
script = ExtResource("6_qoiyb")
dialog = "[Cryptic Nomad] Careful. None who touch that ever die without regrets, and never peacefully.
[Cryptic Nomad] The road you're walking isn't one for the weak-hearted. We lose good people every day, and in the end, you're just another grain of sand in this barren desert.
[Cryptic Nomad] You're too far gone to go back now. Best be careful now, 'cause that angel on your shoulder whispering in your ear isn't as angelic as you think. Whether you listen to it or not, whatever you decide, the fate of this desert is waiting in that cave."
metadata/_custom_type_script = "uid://rvaetvwo5p3h"

[sub_resource type="Resource" id="Resource_f3sn8"]
script = ExtResource("6_qoiyb")
dialog = "[Piano Man] I used to play for the town, ya know. 
The entire town used to come here after a hard day's work, grab some drinks with their neighbors and listen to the chatter of the saloon… and my music of course. 
Some people used to dance. She used to dance…waltz around the tables… God, I hope she's okay… 
Used to be everyone together. Dancin', singin', laughin' ...Funny how life works, huh? Always changin'. "
metadata/_custom_type_script = "uid://rvaetvwo5p3h"

[node name="LevelTown1" instance=ExtResource("1_j5c1u")]

[node name="World" parent="." index="1"]
navigation_mesh = SubResource("NavigationMesh_jsebj")

[node name="Floor" parent="World" index="0"]
curve = SubResource("Curve3D_j5c1u")
material = ExtResource("2_suwgb")

[node name="Left" type="Node3D" parent="EntryPoints" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -5.1420584, 0, 3.0784688)

[node name="Right" type="Node3D" parent="EntryPoints" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 10.351776, 0, 3.247616)

[node name="Left" parent="TransitionAreas" index="0" instance=ExtResource("2_83i12")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -6.901182, 0, 3.1799572)
target_scene = "uid://bueg0v6pvrthp"
target_entry_point = "Right"

[node name="Right" parent="TransitionAreas" index="1" instance=ExtResource("2_83i12")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.483023, 0, 3.247616)
target_scene = "uid://crgv6bkolrlyy"
target_entry_point = "Left"

[node name="Notes" type="Node3D" parent="." index="5"]

[node name="Comment" parent="Notes" index="0" instance=ExtResource("4_0hyq2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.39030218, 0, 3.104404)
text = "this is the town.
it should have several houses."

[node name="Comment2" parent="Notes" index="1" instance=ExtResource("4_0hyq2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 6.7641077, 0, 3.1090455)
text = "eventually it'll be split into a few scenes:
(1) initial, (2) peaceful, (3) corrupted, (4) sheriff."

[node name="NPCs" type="Node3D" parent="." index="6"]

[node name="NPCTest" parent="NPCs" index="0" instance=ExtResource("5_jrcoc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 3.444736, 0, 1.1609888)
timelime = SubResource("Resource_1ab8i")

[node name="NPCTest2" parent="NPCs" index="1" instance=ExtResource("5_jrcoc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.606473, 0, 1.6276722)
timelime = SubResource("Resource_jrcoc")

[node name="Sprite3D" parent="NPCs/NPCTest2" index="0"]
modulate = Color(0.86, 0.4380267, 0.06879999, 1)

[node name="Comment" parent="NPCs/NPCTest2" index="2" instance=ExtResource("4_0hyq2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5406563, 0)
text = "Snake Oil Salesman"

[node name="NPCTest3" parent="NPCs" index="2" instance=ExtResource("5_jrcoc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.517522, 0, 2.5186634)
timelime = SubResource("Resource_qoiyb")

[node name="Sprite3D" parent="NPCs/NPCTest3" index="0"]
modulate = Color(0.07999998, 1, 0.89266676, 1)

[node name="Comment" parent="NPCs/NPCTest3" index="2" instance=ExtResource("4_0hyq2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5406563, 0)
text = "Cryptic Nomad"

[node name="NPCTest4" parent="NPCs" index="3" instance=ExtResource("5_jrcoc")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.8687649, 0, 5.6259146)
timelime = SubResource("Resource_f3sn8")

[node name="Sprite3D" parent="NPCs/NPCTest4" index="0"]
modulate = Color(1.158732, 0.13998671, 1.4687854, 1)

[node name="Comment" parent="NPCs/NPCTest4" index="2" instance=ExtResource("4_0hyq2")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.5406563, 0)
text = "Piano Man"

[editable path="NPCs/NPCTest2"]
[editable path="NPCs/NPCTest3"]
[editable path="NPCs/NPCTest4"]
