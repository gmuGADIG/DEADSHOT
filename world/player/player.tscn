[gd_scene load_steps=37 format=3 uid="uid://nuqmhgq1e2lu"]

[ext_resource type="Script" uid="uid://llqh4g6obmup" path="res://world/player/player.gd" id="1_bvkkv"]
[ext_resource type="Texture2D" uid="uid://doi1lgfq8hi21" path="res://world/player/player_sheet.png" id="2_2x47q"]
[ext_resource type="PackedScene" uid="uid://bas8xwk5nhlq0" path="res://world/player/HUD/hud.tscn" id="2_duds0"]
[ext_resource type="Script" uid="uid://dbka0ckv4aeih" path="res://world/player/player_animation.gd" id="3_3n4qb"]
[ext_resource type="Script" uid="uid://cwjxwkxciij4o" path="res://systems/interaction/interactor.gd" id="3_cvtd2"]
[ext_resource type="PackedScene" uid="uid://vnurg1w4ttt4" path="res://world/player/weapon/dualies/weapon_dualies.tscn" id="3_jrep8"]
[ext_resource type="Script" uid="uid://c4s1ohnc08ecy" path="res://world/player/reticle/reticle.gd" id="4_40qjc"]
[ext_resource type="PackedScene" uid="uid://duf7ry1s34j7o" path="res://world/player/weapon/whip/whip.tscn" id="4_duds0"]
[ext_resource type="Texture2D" uid="uid://bwm425xkr0vcy" path="res://temp_art/icon.svg" id="4_et4on"]
[ext_resource type="PackedScene" uid="uid://s0mcou8b7n0v" path="res://systems/attacking/hurt_fx/hurt_fx.tscn" id="4_myh4x"]
[ext_resource type="PackedScene" uid="uid://cj5uuu7xjsprv" path="res://world/player/weapon/basic_gun/basic_gun.tscn" id="4_q1k4r"]
[ext_resource type="Script" uid="uid://do5vs8m1law7o" path="res://systems/attacking/health/health.gd" id="6_thypd"]
[ext_resource type="Script" uid="uid://lxg83i28nlul" path="res://systems/attacking/hurtbox/hurtbox.gd" id="7_d3e1v"]
[ext_resource type="Script" uid="uid://c1g7056xgtqys" path="res://systems/camera/camera_tracked.gd" id="11_2x47q"]
[ext_resource type="PackedScene" uid="uid://bqngdxosj3du1" path="res://world/player/weapon/shotgun/shotgun.tscn" id="11_3n4qb"]
[ext_resource type="PackedScene" uid="uid://dou0ya37mv70s" path="res://audio/streams/roll_sound.tscn" id="14_lbm61"]
[ext_resource type="PackedScene" uid="uid://cjqtb588mlf84" path="res://audio/streams/hurt_sound.tscn" id="15_jrep8"]

[sub_resource type="Curve" id="Curve_2x47q"]
_limits = [0.0, 20.0, 0.0, 0.45]
_data = [Vector2(0, 9.870129), 0.0, 0.0, 0, 0, Vector2(0.05559846, 20), 0.0, 0.0, 0, 0, Vector2(0.32837838, 20), 0.0, 0.0, 0, 0, Vector2(0.45, 0), 0.0, 0.0, 0, 0]
point_count = 4

[sub_resource type="CylinderShape3D" id="CylinderShape3D_plfsl"]
height = 1.85699
radius = 0.669922

[sub_resource type="AtlasTexture" id="AtlasTexture_3n4qb"]
atlas = ExtResource("2_2x47q")
region = Rect2(4096, 0, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_myh4x"]
atlas = ExtResource("2_2x47q")
region = Rect2(0, 1024, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_80mbn"]
atlas = ExtResource("2_2x47q")
region = Rect2(1024, 1024, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_lbm61"]
atlas = ExtResource("2_2x47q")
region = Rect2(2048, 1024, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_2x47q"]
atlas = ExtResource("2_2x47q")
region = Rect2(1024, 3072, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_jrep8"]
atlas = ExtResource("2_2x47q")
region = Rect2(2048, 3072, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_q1k4r"]
atlas = ExtResource("2_2x47q")
region = Rect2(3072, 3072, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_scey4"]
atlas = ExtResource("2_2x47q")
region = Rect2(4096, 3072, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_fn377"]
atlas = ExtResource("2_2x47q")
region = Rect2(2048, 5120, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_wxa5a"]
atlas = ExtResource("2_2x47q")
region = Rect2(3072, 5120, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_xq3gs"]
atlas = ExtResource("2_2x47q")
region = Rect2(4096, 5120, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_hnw2l"]
atlas = ExtResource("2_2x47q")
region = Rect2(2048, 2048, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_gy2m5"]
atlas = ExtResource("2_2x47q")
region = Rect2(3072, 2048, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_tckbl"]
atlas = ExtResource("2_2x47q")
region = Rect2(4096, 2048, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_sacbj"]
atlas = ExtResource("2_2x47q")
region = Rect2(0, 3072, 1024, 1024)

[sub_resource type="SpriteFrames" id="SpriteFrames_jrep8"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_3n4qb")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_myh4x")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_80mbn")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_lbm61")
}],
"loop": true,
"name": &"idle",
"speed": 5.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_2x47q")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_jrep8")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_q1k4r")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_scey4")
}],
"loop": false,
"name": &"rolling",
"speed": 8.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_fn377")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_wxa5a")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_xq3gs")
}],
"loop": false,
"name": &"shooting",
"speed": 10.0
}, {
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_hnw2l")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gy2m5")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tckbl")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_sacbj")
}],
"loop": true,
"name": &"walking",
"speed": 8.0
}]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_bvkkv"]
height = 0.27978516
radius = 0.8881836

[node name="Player" type="CharacterBody3D" node_paths=PackedStringArray("health_component", "whip") groups=["player"]]
collision_layer = 2
script = ExtResource("1_bvkkv")
roll_curve = SubResource("Curve_2x47q")
health_component = NodePath("HurtboxComponent/HealthComponent")
whip = NodePath("Whip")

[node name="CollisionShape3D" type="CollisionShape3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.94693, 0)
shape = SubResource("CylinderShape3D_plfsl")

[node name="Weapons" type="Node3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.237, 0)

[node name="Shotgun" parent="Weapons" instance=ExtResource("11_3n4qb")]

[node name="Dualies" parent="Weapons" instance=ExtResource("3_jrep8")]

[node name="BasicGun" parent="Weapons" instance=ExtResource("4_q1k4r")]

[node name="Sprite" type="AnimatedSprite3D" parent="." node_paths=PackedStringArray("player")]
transform = Transform3D(0.39, 0, 0, 0, 0.33774987, 0.19500007, 0, -0.19500007, 0.33774987, 0.00084251165, 1.6017487, 0)
shaded = true
alpha_cut = 1
sprite_frames = SubResource("SpriteFrames_jrep8")
animation = &"idle"
autoplay = "idle"
script = ExtResource("3_3n4qb")
player = NodePath("..")

[node name="HurtFX" parent="Sprite" node_paths=PackedStringArray("health") instance=ExtResource("4_myh4x")]
health = NodePath("../../HurtboxComponent/HealthComponent")

[node name="InteractionArea" type="Area3D" parent="."]
unique_name_in_owner = true
collision_mask = 4
script = ExtResource("3_cvtd2")
metadata/_custom_type_script = "uid://cwjxwkxciij4o"

[node name="CollisionShape3D" type="CollisionShape3D" parent="InteractionArea"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.8601074, 0)
shape = SubResource("CylinderShape3D_bvkkv")

[node name="Aiming" type="Node" parent="."]

[node name="Reticle" type="Node3D" parent="Aiming"]
unique_name_in_owner = true
script = ExtResource("4_40qjc")

[node name="Sprite3D" type="Sprite3D" parent="Aiming/Reticle"]
transform = Transform3D(0.34999996, 0, 0, 0, 0, 0.34999993, 0, -0.34999993, 0, 0, 0.051027596, 0)
texture = ExtResource("4_et4on")

[node name="CameraTracked" type="Node3D" parent="Aiming/Reticle"]
script = ExtResource("11_2x47q")
weight = 0.1
metadata/_custom_type_script = "uid://c1g7056xgtqys"

[node name="HurtboxComponent" type="Area3D" parent="." node_paths=PackedStringArray("health_component")]
collision_layer = 2
collision_mask = 0
script = ExtResource("7_d3e1v")
health_component = NodePath("HealthComponent")
allowed_damage_sources = Array[int]([1, 2])
metadata/_custom_type_script = "uid://lxg83i28nlul"

[node name="CollisionShape3D" type="CollisionShape3D" parent="HurtboxComponent"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.94693, 0)
shape = SubResource("CylinderShape3D_plfsl")

[node name="HealthComponent" type="Node" parent="HurtboxComponent"]
unique_name_in_owner = true
script = ExtResource("6_thypd")
max_health = 6.0
metadata/_custom_type_script = "uid://do5vs8m1law7o"

[node name="GPUParticlesAttractorSphere3D" type="GPUParticlesAttractorSphere3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -0.44795907, 1.4558618, 0)
strength = 100.0
attenuation = 0.2
cull_mask = 4294966274
radius = 50.0

[node name="GPUParticlesCollisionBox3D" type="GPUParticlesCollisionBox3D" parent="."]
transform = Transform3D(0.70710677, 0, 0.70710677, 0, 1, 0, -0.70710677, 0, 0.70710677, -0.4213004, 0.76894426, 0.16874915)
cull_mask = 4294966274
size = Vector3(2.0436769, 4.2347975, 2.0017486)

[node name="Whip" parent="." instance=ExtResource("4_duds0")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.54808617, 0)

[node name="CameraTracked" type="Node3D" parent="."]
script = ExtResource("11_2x47q")
weight = 2.0
metadata/_custom_type_script = "uid://c1g7056xgtqys"

[node name="OmniLight3D" type="OmniLight3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.9011965, 0)
light_energy = 0.2
omni_range = 25.0
omni_attenuation = 1.5

[node name="Hud" parent="." instance=ExtResource("2_duds0")]

[node name="Sounds" type="Node3D" parent="."]

[node name="RollSound" parent="Sounds" instance=ExtResource("14_lbm61")]
unique_name_in_owner = true

[node name="HurtSound" parent="Sounds" instance=ExtResource("15_jrep8")]
unique_name_in_owner = true

[connection signal="was_hit" from="HurtboxComponent" to="." method="_on_hurtbox_component_was_hit"]
