[gd_scene load_steps=23 format=3 uid="uid://b4n4rflu3my0v"]

[ext_resource type="PackedScene" uid="uid://dx3l0wduat3tp" path="res://world/enemy/base/enemy_base.tscn" id="1_qriva"]
[ext_resource type="Script" uid="uid://dqw3rnmgfv6r7" path="res://world/enemy/longhorn/longhorn.gd" id="2_efxix"]
[ext_resource type="Texture2D" uid="uid://dtnsuhhtir45v" path="res://world/enemy/longhorn/longhorn.png" id="3_uamdi"]
[ext_resource type="Script" uid="uid://dcjnlxr6kle7v" path="res://world/enemy/longhorn/longhorn_animator.gd" id="4_3lbiw"]
[ext_resource type="Script" uid="uid://dy4h4d283fxxn" path="res://util/sprite_shaker.gd" id="4_g07qo"]
[ext_resource type="PackedScene" uid="uid://bpfklhcte1c5h" path="res://audio/streams/longhorn_die_sound.tscn" id="5_uamdi"]
[ext_resource type="PackedScene" uid="uid://3cvvvws1lhvd" path="res://audio/streams/longhorn_dash_sound.tscn" id="6_3lbiw"]

[sub_resource type="AtlasTexture" id="AtlasTexture_3lbiw"]
atlas = ExtResource("3_uamdi")
region = Rect2(0, 0, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_80tre"]
atlas = ExtResource("3_uamdi")
region = Rect2(1024, 0, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_s8yv2"]
atlas = ExtResource("3_uamdi")
region = Rect2(2048, 0, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_i0qxt"]
atlas = ExtResource("3_uamdi")
region = Rect2(3072, 0, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_cly6k"]
atlas = ExtResource("3_uamdi")
region = Rect2(4096, 0, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_ph0od"]
atlas = ExtResource("3_uamdi")
region = Rect2(0, 1024, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_hx3vc"]
atlas = ExtResource("3_uamdi")
region = Rect2(1024, 1024, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_e6frw"]
atlas = ExtResource("3_uamdi")
region = Rect2(2048, 1024, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_7cyt7"]
atlas = ExtResource("3_uamdi")
region = Rect2(3072, 1024, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_2fbjt"]
atlas = ExtResource("3_uamdi")
region = Rect2(4096, 1024, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_aadow"]
atlas = ExtResource("3_uamdi")
region = Rect2(0, 2048, 1024, 1024)

[sub_resource type="AtlasTexture" id="AtlasTexture_2niaj"]
atlas = ExtResource("3_uamdi")
region = Rect2(1024, 2048, 1024, 1024)

[sub_resource type="SpriteFrames" id="SpriteFrames_toved"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_3lbiw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_80tre")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_s8yv2")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_i0qxt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_cly6k")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ph0od")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_hx3vc")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_e6frw")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_7cyt7")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2fbjt")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_aadow")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_2niaj")
}],
"loop": true,
"name": &"default",
"speed": 10.0
}]

[sub_resource type="CylinderShape3D" id="CylinderShape3D_plfsl"]
height = 1.85699
radius = 0.669922

[sub_resource type="FastNoiseLite" id="FastNoiseLite_4j1ge"]

[node name="LonghornEnemy" instance=ExtResource("1_qriva")]
script = ExtResource("2_efxix")
charge_time = 1.0
cooldown_time = 1.5
stuck_time = 3.0
atk_source = 1
atk_knockback = 1
proximity_tolerance = 1.5

[node name="Sprite" parent="." index="1"]
transform = Transform3D(0.36, 0, 0, 0, 0.3117691, 0.1800001, 0, -0.1800001, 0.3117691, 0, 1.1138115, 0)
sprite_frames = SubResource("SpriteFrames_toved")
autoplay = "default"
frame_progress = 0.40190268
script = ExtResource("4_3lbiw")

[node name="Health" parent="." index="3"]
max_health = 5

[node name="CollisionShape3D" parent="Hurtbox" index="0"]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 0, 0.94693, 0)

[node name="VisibleOnScreenNotifier3D" type="VisibleOnScreenNotifier3D" parent="." index="6"]

[node name="ChargeTimer" type="Timer" parent="." index="7"]
unique_name_in_owner = true

[node name="HurterBox" type="Area3D" parent="." index="8"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="HurterBox" index="0"]
transform = Transform3D(1.5, 0, 0, 0, 1.5, 0, 0, 0, 1.5, 0, 0, 0)
shape = SubResource("CylinderShape3D_plfsl")

[node name="SpriteShaker" type="Node" parent="." index="9" node_paths=PackedStringArray("sprite")]
unique_name_in_owner = true
script = ExtResource("4_g07qo")
shake_intensity = 0.4
shake_speed = 500.0
shaking = true
sprite = NodePath("../Sprite")
noise = SubResource("FastNoiseLite_4j1ge")

[node name="Sounds" type="Node3D" parent="." index="11"]

[node name="LonghornDieSound" parent="Sounds" index="0" instance=ExtResource("5_uamdi")]
bus = &"SFX"

[node name="LonghornDashSound" parent="Sounds" index="1" instance=ExtResource("6_3lbiw")]
bus = &"SFX"

[node name="StuckTimer" type="Timer" parent="." index="12"]

[connection signal="killed" from="Health" to="." method="_on_killed"]
[connection signal="screen_entered" from="VisibleOnScreenNotifier3D" to="." method="_on_visible_on_screen_notifier_3d_screen_entered"]
[connection signal="timeout" from="ChargeTimer" to="." method="_on_charge_timer_timeout"]
[connection signal="area_entered" from="HurterBox" to="." method="_on_hurter_box_area_entered"]
[connection signal="timeout" from="StuckTimer" to="." method="_on_stuck_timer_timeout"]
